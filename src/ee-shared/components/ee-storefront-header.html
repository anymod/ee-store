<div class="position-relative">
  <!-- blocker -->
  <div ng-show="blocked" class="navbar position-absolute" style="z-index: 2005; top: 0; left: 0; right: 0; height: 52px;"></div>
  <!-- /blocker -->

  <nav id="navtop"
       class="navbar navbar-default navbar-rgba-colors no-side-border margin-0 round-0"
       ng-style="{ 'background-color': meta.home.topBarBackgroundColor }">

    <div ng-show="loading" class="container-fluid" name="loading-navbar">
      <h2 class="inline-block pull-left" style="margin: 7px 7px 0 0">
        <i class="fa fa-fw fa-circle-o-notch fa-spin text-info"></i>
      </h2>
    </div>

    <div ng-hide="loading" class="container-fluid" name="store-navbar">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" ng-init="navCollapsed = true" ng-click="navCollapsed = !navCollapsed">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a ui-sref="storefront"
           class="navbar-brand margin-0"
           ng-style="{ color: meta.home.topBarColor }"
           ng-bind="meta.home.name">
        </a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div collapse="navCollapsed" class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li ng-class="{ active: state == 'storefront' }"><a ui-sref="storefront" ng-click="navCollapsed = true" ng-style="{ color: meta.home.topBarColor }">Home</a></li>

          <li ng-class="{ active: state == 'collection' }" class="dropdown" dropdown>
            <a href class="dropdown-toggle" ng-style="{ color: meta.home.topBarColor }" dropdown-toggle>
              Shop <span class="caret"></span>
            </a>
            <ee-shop-nav ng-show="collections" collections="collections" class="dropdown-menu"></ee-shop-nav>
          </li>

          <li ng-show="!!meta.blog.url">
            <a href="{{ meta.blog.url | addHttp }}" target="_blank" ng-style="{ color: meta.home.topBarColor }">Blog</a>
            <div class="popover bottom in inline-block"
                 style="top: 42px; width: 300px;"
                 ng-show="isBuilder && state == 'storefront.blog'">
              <div class="arrow" style="left: 12%;"></div>
              <div class="popover-content">
                <div ng-if="meta.blog.url">
                  Customers will be directed to your&nbsp;
                  <a href="{{ meta.blog.url | addHttp }}" target="_blank" class="btn btn-primary btn-sm">blog link</a>
                </div>
                <div ng-if="!meta.blog.url">
                  Enter the link to your blog and this button will direct to it.
                </div>
              </div>
            </div>
          </li>

          <li ng-class="{ active: state == 'storefront-about' }"
              ng-show="state == 'storefront-about' || meta.about.headline || meta.about.content">
            <a ui-sref="storefront-about" ng-click="navCollapsed = true" ng-style="{ color: meta.home.topBarColor }">
              About
            </a>
          </li>

        </ul>
        <ul class="nav navbar-nav navbar-right">

          <!-- audience: store -->
          <li ng-repeat="site in ['facebook', 'pinterest', 'twitter', 'instagram']"
              ng-if="!!meta.audience.social[site]">
            <a href="http://{{ site }}.com/{{ meta.audience.social[site] }}"
               target="_blank" class="squeeze-5"
               ng-style="{ color: meta.home.topBarColor }">
              <i class="fa fa-{{ site }}"></i>
            </a>
          </li>
          <li ng-if="isStore && !!meta.audience.contact.email">
            <a href="mailto:{{ meta.audience.contact.email }}"
               target="_blank"
               class="squeeze-5"
               ng-style="{ color: meta.home.topBarColor }">
              <i class="fa fa-envelope"></i>
            </a>
          </li>

          <!-- audience: builder -->
          <li ng-show="state == 'storefront.audience'">
            <a ng-if="isBuilder && !meta.audience.social.facebook && !meta.audience.social.pinterest && !meta.audience.social.twitter && !meta.audience.social.instagram && !meta.audience.contact.email"
               ui-sref="storefront-edit" class="squeeze-5" ng-style="{ color: meta.home.topBarColor }">
              <i class="fa fa-fw fa-lg fa-facebook"></i>
              <i class="fa fa-fw fa-lg fa-pinterest"></i>
              <i class="fa fa-fw fa-lg fa-twitter"></i>
              <i class="fa fa-fw fa-lg fa-instagram"></i>
              <i class="fa fa-fw fa-lg fa-envelope"></i>
            </a>
            <!-- <div class="popover bottom in inline-block"
                 style="top: 42px; width: 300px; right: -10px; left: auto;">
              <div class="arrow" style="left: auto; right: 4%;"></div>
              <div ng-if="!meta.audience.social.facebook && !meta.audience.social.pinterest && !meta.audience.social.twitter && !meta.audience.social.instagram && !meta.audience.contact.email"
                   class="popover-content">
                Add your social media & email and they will show here.
              </div>
              <div ng-if="!!meta.audience.social.facebook || !!meta.audience.social.pinterest || !!meta.audience.social.twitter || !!meta.audience.social.instagram || !!meta.audience.contact.email"
                   class="popover-content">
                <div ng-if="!!meta.audience.social.facebook || !!meta.audience.social.pinterest || !!meta.audience.social.twitter || !!meta.audience.social.instagram">
                  Your links are active for
                  <a ng-if='!!meta.audience.social.facebook' class="btn btn-info btn-block" href="http://facebook.com/{{ meta.audience.social.facebook }}" target="_blank"><i class="fa fa-lg fa-fw fa-facebook"></i> Facebook<br><small><small>facebook.com/</small>{{ meta.audience.social.facebook }}</small></a>
                  <a ng-if='!!meta.audience.social.pinterest' class="btn btn-danger btn-block" href="http://pinterest.com/{{ meta.audience.social.pinterest }}" target="_blank"><i class="fa fa-lg fa-fw fa-pinterest"></i> Pinterest<br><small><small>pinterest.com/</small>{{ meta.audience.social.pinterest }}</small></a>
                  <a ng-if='!!meta.audience.social.twitter' class="btn btn-primary btn-block" href="http://twitter.com/{{ meta.audience.social.twitter }}" target="_blank"><i class="fa fa-lg fa-fw fa-twitter"></i> Twitter<br><small><small>twitter.com/</small>{{ meta.audience.social.twitter }}</small></a>
                  <a ng-if='!!meta.audience.social.instagram' class="btn btn-warning btn-block" href="http://instagram.com/{{ meta.audience.social.instagram }}" target="_blank"><i class="fa fa-lg fa-fw fa-instagram"></i> Instagram<br><small><small>instagram.com/</small>{{ meta.audience.social.instagram }}</small></a>
                  <br>
                </div>
                <div ng-if="meta.audience.contact.email">
                  Customers can email you at
                  <div class="full-width text-center">
                    <a class="btn btn-primary btn-block"
                       href="mailto:{{ meta.audience.contact.email }}"
                       target="_blank"
                       ng-bind="meta.audience.contact.email">
                    </a>
                  </div>
                </div>
              </div>
            </div> -->
          </li>

          <!-- TODO implement search on storefront products -->
          <!-- <li><a ui-sref="storefront" ng-style="{ color: meta.home.topBarColor }"><i class="fa fa-search"></i></a></li> -->

          <li class="dropdown" dropdown>
            <a ng-if="isBuilder" href class="dropdown-toggle" ng-style="{ color: meta.home.topBarColor }" dropdown-toggle>
              <i class="fa fa-lg fa-shopping-cart"></i>
            </a>
            <a ng-if="isStore" ui-sref="cart" class="position-relative" ng-style="{ color: meta.home.topBarColor }">
              <i class="fa fa-fw fa-lg fa-shopping-cart"></i>
              <strong ng-if="quantityArray && quantityArray.length > 0">{{ quantityArray.length }}</strong>
            </a>

            <ul class="dropdown-menu">
              <li>
                <a href>This button takes<br>customers to their carts</a>
              </li>
            </ul>
          </li>

        </ul>
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav>

</div>
